[{"class_name": "ArticleApi", "class_chunk": "", "methods": [{"method_name": "article", "method_chunk": "@GetMapping\n  public ResponseEntity<?> article(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    return articleQueryService\n        .findBySlug(slug, user)\n        .map(articleData -> ResponseEntity.ok(articleResponse(articleData)))\n        .orElseThrow(ResourceNotFoundException::new);\n  }", "calls": [{"parent_name": "ArticleQueryService", "method_name": "setIsFavorite", "method_chunk": "private void setIsFavorite(List<ArticleData> articles, User currentUser) {\n    Set<String> favoritedArticles =\n        articleFavoritesReadService.userFavorites(\n            articles.stream().map(articleData -> articleData.getId()).collect(toList()),\n            currentUser);\n\n    articles.forEach(\n        articleData -> {\n          if (favoritedArticles.contains(articleData.getId())) {\n            articleData.setFavorited(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "userFavorites", "method_chunk": "Set<String> userFavorites(@Param(\"ids\") List<String> ids, @Param(\"currentUser\") User currentUser);"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "isUserFavorite", "method_chunk": "boolean isUserFavorite(@Param(\"userId\") String userId, @Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleReadService", "method_name": "findBySlug", "method_chunk": "ArticleData findBySlug(@Param(\"slug\") String slug);"}, {"parent_name": "ArticleQueryService", "method_name": "setFavoriteCount", "method_chunk": "private void setFavoriteCount(List<ArticleData> articles) {\n    List<ArticleFavoriteCount> favoritesCounts =\n        articleFavoritesReadService.articlesFavoriteCount(\n            articles.stream().map(ArticleData::getId).collect(toList()));\n    Map<String, Integer> countMap = new HashMap<>();\n    favoritesCounts.forEach(\n        item -> {\n          countMap.put(item.getId(), item.getCount());\n        });\n    articles.forEach(\n        articleData -> articleData.setFavoritesCount(countMap.get(articleData.getId())));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articleFavoriteCount", "method_chunk": "int articleFavoriteCount(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ArticleQueryService", "method_name": "setIsFollowingAuthor", "method_chunk": "private void setIsFollowingAuthor(List<ArticleData> articles, User currentUser) {\n    Set<String> followingAuthors =\n        userRelationshipQueryService.followingAuthors(\n            currentUser.getId(),\n            articles.stream()\n                .map(articleData1 -> articleData1.getProfileData().getId())\n                .collect(toList()));\n    articles.forEach(\n        articleData -> {\n          if (followingAuthors.contains(articleData.getProfileData().getId())) {\n            articleData.getProfileData().setFollowing(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleApi", "method_name": "article", "method_chunk": "@GetMapping\n  public ResponseEntity<?> article(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    return articleQueryService\n        .findBySlug(slug, user)\n        .map(articleData -> ResponseEntity.ok(articleResponse(articleData)))\n        .orElseThrow(ResourceNotFoundException::new);\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "findBySlug", "method_chunk": "public Optional<ArticleData> findBySlug(String slug, User user) {\n    ArticleData articleData = articleReadService.findBySlug(slug);\n    if (articleData == null) {\n      return Optional.empty();\n    } else {\n      if (user != null) {\n        fillExtraInfo(articleData.getId(), user, articleData);\n      }\n      return Optional.of(articleData);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articlesFavoriteCount", "method_chunk": "List<ArticleFavoriteCount> articlesFavoriteCount(@Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleApi", "method_name": "articleResponse", "method_chunk": "private Map<String, Object> articleResponse(ArticleData articleData) {\n    return new HashMap<String, Object>() {\n      {\n        put(\"article\", articleData);\n      }\n    };\n  }"}]}, {"method_name": "updateArticle", "method_chunk": "@PutMapping\n  public ResponseEntity<?> updateArticle(\n      @PathVariable(\"slug\") String slug,\n      @AuthenticationPrincipal User user,\n      @Valid @RequestBody UpdateArticleParam updateArticleParam) {\n    return articleRepository\n        .findBySlug(slug)\n        .map(\n            article -> {\n              if (!AuthorizationService.canWriteArticle(user, article)) {\n                throw new NoAuthorizationException();\n              }\n              Article updatedArticle =\n                  articleCommandService.updateArticle(article, updateArticleParam);\n              return ResponseEntity.ok(\n                  articleResponse(\n                      articleQueryService.findBySlug(updatedArticle.getSlug(), user).get()));\n            })\n        .orElseThrow(ResourceNotFoundException::new);\n  }", "calls": [{"parent_name": "ArticleQueryService", "method_name": "setIsFavorite", "method_chunk": "private void setIsFavorite(List<ArticleData> articles, User currentUser) {\n    Set<String> favoritedArticles =\n        articleFavoritesReadService.userFavorites(\n            articles.stream().map(articleData -> articleData.getId()).collect(toList()),\n            currentUser);\n\n    articles.forEach(\n        articleData -> {\n          if (favoritedArticles.contains(articleData.getId())) {\n            articleData.setFavorited(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "userFavorites", "method_chunk": "Set<String> userFavorites(@Param(\"ids\") List<String> ids, @Param(\"currentUser\") User currentUser);"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "isUserFavorite", "method_chunk": "boolean isUserFavorite(@Param(\"userId\") String userId, @Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleApi", "method_name": "updateArticle", "method_chunk": "@PutMapping\n  public ResponseEntity<?> updateArticle(\n      @PathVariable(\"slug\") String slug,\n      @AuthenticationPrincipal User user,\n      @Valid @RequestBody UpdateArticleParam updateArticleParam) {\n    return articleRepository\n        .findBySlug(slug)\n        .map(\n            article -> {\n              if (!AuthorizationService.canWriteArticle(user, article)) {\n                throw new NoAuthorizationException();\n              }\n              Article updatedArticle =\n                  articleCommandService.updateArticle(article, updateArticleParam);\n              return ResponseEntity.ok(\n                  articleResponse(\n                      articleQueryService.findBySlug(updatedArticle.getSlug(), user).get()));\n            })\n        .orElseThrow(ResourceNotFoundException::new);\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "setFavoriteCount", "method_chunk": "private void setFavoriteCount(List<ArticleData> articles) {\n    List<ArticleFavoriteCount> favoritesCounts =\n        articleFavoritesReadService.articlesFavoriteCount(\n            articles.stream().map(ArticleData::getId).collect(toList()));\n    Map<String, Integer> countMap = new HashMap<>();\n    favoritesCounts.forEach(\n        item -> {\n          countMap.put(item.getId(), item.getCount());\n        });\n    articles.forEach(\n        articleData -> articleData.setFavoritesCount(countMap.get(articleData.getId())));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articleFavoriteCount", "method_chunk": "int articleFavoriteCount(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ArticleReadService", "method_name": "findBySlug", "method_chunk": "ArticleData findBySlug(@Param(\"slug\") String slug);"}, {"parent_name": "ArticleQueryService", "method_name": "setIsFollowingAuthor", "method_chunk": "private void setIsFollowingAuthor(List<ArticleData> articles, User currentUser) {\n    Set<String> followingAuthors =\n        userRelationshipQueryService.followingAuthors(\n            currentUser.getId(),\n            articles.stream()\n                .map(articleData1 -> articleData1.getProfileData().getId())\n                .collect(toList()));\n    articles.forEach(\n        articleData -> {\n          if (followingAuthors.contains(articleData.getProfileData().getId())) {\n            articleData.getProfileData().setFollowing(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleRepository", "method_name": "save", "method_chunk": "void save(Article article);"}, {"parent_name": "ArticleRepository", "method_name": "findBySlug", "method_chunk": "Optional<Article> findBySlug(String slug);"}, {"parent_name": "ArticleCommandService", "method_name": "updateArticle", "method_chunk": "public Article updateArticle(Article article, @Valid UpdateArticleParam updateArticleParam) {\n    article.update(\n        updateArticleParam.getTitle(),\n        updateArticleParam.getDescription(),\n        updateArticleParam.getBody());\n    articleRepository.save(article);\n    return article;\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "findBySlug", "method_chunk": "public Optional<ArticleData> findBySlug(String slug, User user) {\n    ArticleData articleData = articleReadService.findBySlug(slug);\n    if (articleData == null) {\n      return Optional.empty();\n    } else {\n      if (user != null) {\n        fillExtraInfo(articleData.getId(), user, articleData);\n      }\n      return Optional.of(articleData);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articlesFavoriteCount", "method_chunk": "List<ArticleFavoriteCount> articlesFavoriteCount(@Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleApi", "method_name": "articleResponse", "method_chunk": "private Map<String, Object> articleResponse(ArticleData articleData) {\n    return new HashMap<String, Object>() {\n      {\n        put(\"article\", articleData);\n      }\n    };\n  }"}]}, {"method_name": "deleteArticle", "method_chunk": "@DeleteMapping\n  public ResponseEntity deleteArticle(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    return articleRepository\n        .findBySlug(slug)\n        .map(\n            article -> {\n              if (!AuthorizationService.canWriteArticle(user, article)) {\n                throw new NoAuthorizationException();\n              }\n              articleRepository.remove(article);\n              return ResponseEntity.noContent().build();\n            })\n        .orElseThrow(ResourceNotFoundException::new);\n  }", "calls": [{"parent_name": "ArticleRepository", "method_name": "remove", "method_chunk": "void remove(Article article);"}, {"parent_name": "ArticleRepository", "method_name": "findBySlug", "method_chunk": "Optional<Article> findBySlug(String slug);"}, {"parent_name": "ArticleApi", "method_name": "deleteArticle", "method_chunk": "@DeleteMapping\n  public ResponseEntity deleteArticle(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    return articleRepository\n        .findBySlug(slug)\n        .map(\n            article -> {\n              if (!AuthorizationService.canWriteArticle(user, article)) {\n                throw new NoAuthorizationException();\n              }\n              articleRepository.remove(article);\n              return ResponseEntity.noContent().build();\n            })\n        .orElseThrow(ResourceNotFoundException::new);\n  }"}]}]}, {"class_name": "ArticleFavoriteApi", "class_chunk": "", "methods": [{"method_name": "favoriteArticle", "method_chunk": "@PostMapping\n  public ResponseEntity favoriteArticle(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    ArticleFavorite articleFavorite = new ArticleFavorite(article.getId(), user.getId());\n    articleFavoriteRepository.save(articleFavorite);\n    return responseArticleData(articleQueryService.findBySlug(slug, user).get());\n  }", "calls": [{"parent_name": "ArticleQueryService", "method_name": "setIsFavorite", "method_chunk": "private void setIsFavorite(List<ArticleData> articles, User currentUser) {\n    Set<String> favoritedArticles =\n        articleFavoritesReadService.userFavorites(\n            articles.stream().map(articleData -> articleData.getId()).collect(toList()),\n            currentUser);\n\n    articles.forEach(\n        articleData -> {\n          if (favoritedArticles.contains(articleData.getId())) {\n            articleData.setFavorited(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoriteApi", "method_name": "responseArticleData", "method_chunk": "private ResponseEntity<HashMap<String, Object>> responseArticleData(\n      final ArticleData articleData) {\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"article\", articleData);\n          }\n        });\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "userFavorites", "method_chunk": "Set<String> userFavorites(@Param(\"ids\") List<String> ids, @Param(\"currentUser\") User currentUser);"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "isUserFavorite", "method_chunk": "boolean isUserFavorite(@Param(\"userId\") String userId, @Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleReadService", "method_name": "findBySlug", "method_chunk": "ArticleData findBySlug(@Param(\"slug\") String slug);"}, {"parent_name": "ArticleQueryService", "method_name": "setFavoriteCount", "method_chunk": "private void setFavoriteCount(List<ArticleData> articles) {\n    List<ArticleFavoriteCount> favoritesCounts =\n        articleFavoritesReadService.articlesFavoriteCount(\n            articles.stream().map(ArticleData::getId).collect(toList()));\n    Map<String, Integer> countMap = new HashMap<>();\n    favoritesCounts.forEach(\n        item -> {\n          countMap.put(item.getId(), item.getCount());\n        });\n    articles.forEach(\n        articleData -> articleData.setFavoritesCount(countMap.get(articleData.getId())));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articleFavoriteCount", "method_chunk": "int articleFavoriteCount(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ArticleQueryService", "method_name": "setIsFollowingAuthor", "method_chunk": "private void setIsFollowingAuthor(List<ArticleData> articles, User currentUser) {\n    Set<String> followingAuthors =\n        userRelationshipQueryService.followingAuthors(\n            currentUser.getId(),\n            articles.stream()\n                .map(articleData1 -> articleData1.getProfileData().getId())\n                .collect(toList()));\n    articles.forEach(\n        articleData -> {\n          if (followingAuthors.contains(articleData.getProfileData().getId())) {\n            articleData.getProfileData().setFollowing(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleRepository", "method_name": "findBySlug", "method_chunk": "Optional<Article> findBySlug(String slug);"}, {"parent_name": "ArticleFavoriteApi", "method_name": "favoriteArticle", "method_chunk": "@PostMapping\n  public ResponseEntity favoriteArticle(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    ArticleFavorite articleFavorite = new ArticleFavorite(article.getId(), user.getId());\n    articleFavoriteRepository.save(articleFavorite);\n    return responseArticleData(articleQueryService.findBySlug(slug, user).get());\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "findBySlug", "method_chunk": "public Optional<ArticleData> findBySlug(String slug, User user) {\n    ArticleData articleData = articleReadService.findBySlug(slug);\n    if (articleData == null) {\n      return Optional.empty();\n    } else {\n      if (user != null) {\n        fillExtraInfo(articleData.getId(), user, articleData);\n      }\n      return Optional.of(articleData);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articlesFavoriteCount", "method_chunk": "List<ArticleFavoriteCount> articlesFavoriteCount(@Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleFavoriteRepository", "method_name": "save", "method_chunk": "void save(ArticleFavorite articleFavorite);"}]}, {"method_name": "unfavoriteArticle", "method_chunk": "@DeleteMapping\n  public ResponseEntity unfavoriteArticle(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    articleFavoriteRepository\n        .find(article.getId(), user.getId())\n        .ifPresent(\n            favorite -> {\n              articleFavoriteRepository.remove(favorite);\n            });\n    return responseArticleData(articleQueryService.findBySlug(slug, user).get());\n  }", "calls": [{"parent_name": "ArticleQueryService", "method_name": "setIsFavorite", "method_chunk": "private void setIsFavorite(List<ArticleData> articles, User currentUser) {\n    Set<String> favoritedArticles =\n        articleFavoritesReadService.userFavorites(\n            articles.stream().map(articleData -> articleData.getId()).collect(toList()),\n            currentUser);\n\n    articles.forEach(\n        articleData -> {\n          if (favoritedArticles.contains(articleData.getId())) {\n            articleData.setFavorited(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoriteApi", "method_name": "responseArticleData", "method_chunk": "private ResponseEntity<HashMap<String, Object>> responseArticleData(\n      final ArticleData articleData) {\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"article\", articleData);\n          }\n        });\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "userFavorites", "method_chunk": "Set<String> userFavorites(@Param(\"ids\") List<String> ids, @Param(\"currentUser\") User currentUser);"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "isUserFavorite", "method_chunk": "boolean isUserFavorite(@Param(\"userId\") String userId, @Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleReadService", "method_name": "findBySlug", "method_chunk": "ArticleData findBySlug(@Param(\"slug\") String slug);"}, {"parent_name": "ArticleQueryService", "method_name": "setFavoriteCount", "method_chunk": "private void setFavoriteCount(List<ArticleData> articles) {\n    List<ArticleFavoriteCount> favoritesCounts =\n        articleFavoritesReadService.articlesFavoriteCount(\n            articles.stream().map(ArticleData::getId).collect(toList()));\n    Map<String, Integer> countMap = new HashMap<>();\n    favoritesCounts.forEach(\n        item -> {\n          countMap.put(item.getId(), item.getCount());\n        });\n    articles.forEach(\n        articleData -> articleData.setFavoritesCount(countMap.get(articleData.getId())));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articleFavoriteCount", "method_chunk": "int articleFavoriteCount(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ArticleFavoriteRepository", "method_name": "find", "method_chunk": "Optional<ArticleFavorite> find(String articleId, String userId);"}, {"parent_name": "ArticleFavoriteApi", "method_name": "unfavoriteArticle", "method_chunk": "@DeleteMapping\n  public ResponseEntity unfavoriteArticle(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    articleFavoriteRepository\n        .find(article.getId(), user.getId())\n        .ifPresent(\n            favorite -> {\n              articleFavoriteRepository.remove(favorite);\n            });\n    return responseArticleData(articleQueryService.findBySlug(slug, user).get());\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "setIsFollowingAuthor", "method_chunk": "private void setIsFollowingAuthor(List<ArticleData> articles, User currentUser) {\n    Set<String> followingAuthors =\n        userRelationshipQueryService.followingAuthors(\n            currentUser.getId(),\n            articles.stream()\n                .map(articleData1 -> articleData1.getProfileData().getId())\n                .collect(toList()));\n    articles.forEach(\n        articleData -> {\n          if (followingAuthors.contains(articleData.getProfileData().getId())) {\n            articleData.getProfileData().setFollowing(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleFavoriteRepository", "method_name": "remove", "method_chunk": "void remove(ArticleFavorite favorite);"}, {"parent_name": "ArticleRepository", "method_name": "findBySlug", "method_chunk": "Optional<Article> findBySlug(String slug);"}, {"parent_name": "ArticleQueryService", "method_name": "findBySlug", "method_chunk": "public Optional<ArticleData> findBySlug(String slug, User user) {\n    ArticleData articleData = articleReadService.findBySlug(slug);\n    if (articleData == null) {\n      return Optional.empty();\n    } else {\n      if (user != null) {\n        fillExtraInfo(articleData.getId(), user, articleData);\n      }\n      return Optional.of(articleData);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articlesFavoriteCount", "method_chunk": "List<ArticleFavoriteCount> articlesFavoriteCount(@Param(\"ids\") List<String> ids);"}]}]}, {"class_name": "ArticlesApi", "class_chunk": "", "methods": [{"method_name": "createArticle", "method_chunk": "@PostMapping\n  public ResponseEntity createArticle(\n      @Valid @RequestBody NewArticleParam newArticleParam, @AuthenticationPrincipal User user) {\n    Article article = articleCommandService.createArticle(newArticleParam, user);\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"article\", articleQueryService.findById(article.getId(), user).get());\n          }\n        });\n  }", "calls": [{"parent_name": "ArticleQueryService", "method_name": "setIsFavorite", "method_chunk": "private void setIsFavorite(List<ArticleData> articles, User currentUser) {\n    Set<String> favoritedArticles =\n        articleFavoritesReadService.userFavorites(\n            articles.stream().map(articleData -> articleData.getId()).collect(toList()),\n            currentUser);\n\n    articles.forEach(\n        articleData -> {\n          if (favoritedArticles.contains(articleData.getId())) {\n            articleData.setFavorited(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "findById", "method_chunk": "public Optional<ArticleData> findById(String id, User user) {\n    ArticleData articleData = articleReadService.findById(id);\n    if (articleData == null) {\n      return Optional.empty();\n    } else {\n      if (user != null) {\n        fillExtraInfo(id, user, articleData);\n      }\n      return Optional.of(articleData);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "userFavorites", "method_chunk": "Set<String> userFavorites(@Param(\"ids\") List<String> ids, @Param(\"currentUser\") User currentUser);"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "isUserFavorite", "method_chunk": "boolean isUserFavorite(@Param(\"userId\") String userId, @Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleQueryService", "method_name": "setFavoriteCount", "method_chunk": "private void setFavoriteCount(List<ArticleData> articles) {\n    List<ArticleFavoriteCount> favoritesCounts =\n        articleFavoritesReadService.articlesFavoriteCount(\n            articles.stream().map(ArticleData::getId).collect(toList()));\n    Map<String, Integer> countMap = new HashMap<>();\n    favoritesCounts.forEach(\n        item -> {\n          countMap.put(item.getId(), item.getCount());\n        });\n    articles.forEach(\n        articleData -> articleData.setFavoritesCount(countMap.get(articleData.getId())));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articleFavoriteCount", "method_chunk": "int articleFavoriteCount(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ArticlesApi", "method_name": "createArticle", "method_chunk": "@PostMapping\n  public ResponseEntity createArticle(\n      @Valid @RequestBody NewArticleParam newArticleParam, @AuthenticationPrincipal User user) {\n    Article article = articleCommandService.createArticle(newArticleParam, user);\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"article\", articleQueryService.findById(article.getId(), user).get());\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "setIsFollowingAuthor", "method_chunk": "private void setIsFollowingAuthor(List<ArticleData> articles, User currentUser) {\n    Set<String> followingAuthors =\n        userRelationshipQueryService.followingAuthors(\n            currentUser.getId(),\n            articles.stream()\n                .map(articleData1 -> articleData1.getProfileData().getId())\n                .collect(toList()));\n    articles.forEach(\n        articleData -> {\n          if (followingAuthors.contains(articleData.getProfileData().getId())) {\n            articleData.getProfileData().setFollowing(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleRepository", "method_name": "save", "method_chunk": "void save(Article article);"}, {"parent_name": "ArticleReadService", "method_name": "findById", "method_chunk": "ArticleData findById(@Param(\"id\") String id);"}, {"parent_name": "ArticleCommandService", "method_name": "createArticle", "method_chunk": "public Article createArticle(@Valid NewArticleParam newArticleParam, User creator) {\n    Article article =\n        new Article(\n            newArticleParam.getTitle(),\n            newArticleParam.getDescription(),\n            newArticleParam.getBody(),\n            newArticleParam.getTagList(),\n            creator.getId());\n    articleRepository.save(article);\n    return article;\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articlesFavoriteCount", "method_chunk": "List<ArticleFavoriteCount> articlesFavoriteCount(@Param(\"ids\") List<String> ids);"}]}, {"method_name": "getArticles", "method_chunk": "@GetMapping\n  public ResponseEntity getArticles(\n      @RequestParam(value = \"offset\", defaultValue = \"0\") int offset,\n      @RequestParam(value = \"limit\", defaultValue = \"20\") int limit,\n      @RequestParam(value = \"tag\", required = false) String tag,\n      @RequestParam(value = \"favorited\", required = false) String favoritedBy,\n      @RequestParam(value = \"author\", required = false) String author,\n      @AuthenticationPrincipal User user) {\n    return ResponseEntity.ok(\n        articleQueryService.findRecentArticles(\n            tag, author, favoritedBy, new Page(offset, limit), user));\n  }", "calls": [{"parent_name": "ArticleQueryService", "method_name": "setIsFavorite", "method_chunk": "private void setIsFavorite(List<ArticleData> articles, User currentUser) {\n    Set<String> favoritedArticles =\n        articleFavoritesReadService.userFavorites(\n            articles.stream().map(articleData -> articleData.getId()).collect(toList()),\n            currentUser);\n\n    articles.forEach(\n        articleData -> {\n          if (favoritedArticles.contains(articleData.getId())) {\n            articleData.setFavorited(true);\n          }\n        });\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "userFavorites", "method_chunk": "Set<String> userFavorites(@Param(\"ids\") List<String> ids, @Param(\"currentUser\") User currentUser);"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "isUserFavorite", "method_chunk": "boolean isUserFavorite(@Param(\"userId\") String userId, @Param(\"articleId\") String articleId);"}, {"parent_name": "ArticleReadService", "method_name": "findArticles", "method_chunk": "List<ArticleData> findArticles(@Param(\"articleIds\") List<String> articleIds);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleQueryService", "method_name": "setFavoriteCount", "method_chunk": "private void setFavoriteCount(List<ArticleData> articles) {\n    List<ArticleFavoriteCount> favoritesCounts =\n        articleFavoritesReadService.articlesFavoriteCount(\n            articles.stream().map(ArticleData::getId).collect(toList()));\n    Map<String, Integer> countMap = new HashMap<>();\n    favoritesCounts.forEach(\n        item -> {\n          countMap.put(item.getId(), item.getCount());\n        });\n    articles.forEach(\n        articleData -> articleData.setFavoritesCount(countMap.get(articleData.getId())));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "fillExtraInfo", "method_chunk": "private void fillExtraInfo(List<ArticleData> articles, User currentUser) {\n    setFavoriteCount(articles);\n    if (currentUser != null) {\n      setIsFavorite(articles, currentUser);\n      setIsFollowingAuthor(articles, currentUser);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articleFavoriteCount", "method_chunk": "int articleFavoriteCount(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ArticleQueryService", "method_name": "setIsFollowingAuthor", "method_chunk": "private void setIsFollowingAuthor(List<ArticleData> articles, User currentUser) {\n    Set<String> followingAuthors =\n        userRelationshipQueryService.followingAuthors(\n            currentUser.getId(),\n            articles.stream()\n                .map(articleData1 -> articleData1.getProfileData().getId())\n                .collect(toList()));\n    articles.forEach(\n        articleData -> {\n          if (followingAuthors.contains(articleData.getProfileData().getId())) {\n            articleData.getProfileData().setFollowing(true);\n          }\n        });\n  }"}, {"parent_name": "ArticlesApi", "method_name": "getArticles", "method_chunk": "@GetMapping\n  public ResponseEntity getArticles(\n      @RequestParam(value = \"offset\", defaultValue = \"0\") int offset,\n      @RequestParam(value = \"limit\", defaultValue = \"20\") int limit,\n      @RequestParam(value = \"tag\", required = false) String tag,\n      @RequestParam(value = \"favorited\", required = false) String favoritedBy,\n      @RequestParam(value = \"author\", required = false) String author,\n      @AuthenticationPrincipal User user) {\n    return ResponseEntity.ok(\n        articleQueryService.findRecentArticles(\n            tag, author, favoritedBy, new Page(offset, limit), user));\n  }"}, {"parent_name": "ArticleQueryService", "method_name": "findRecentArticles", "method_chunk": "public ArticleDataList findRecentArticles(\n      String tag, String author, String favoritedBy, Page page, User currentUser) {\n    List<String> articleIds = articleReadService.queryArticles(tag, author, favoritedBy, page);\n    int articleCount = articleReadService.countArticle(tag, author, favoritedBy);\n    if (articleIds.size() == 0) {\n      return new ArticleDataList(new ArrayList<>(), articleCount);\n    } else {\n      List<ArticleData> articles = articleReadService.findArticles(articleIds);\n      fillExtraInfo(articles, currentUser);\n      return new ArticleDataList(articles, articleCount);\n    }\n  }"}, {"parent_name": "ArticleFavoritesReadService", "method_name": "articlesFavoriteCount", "method_chunk": "List<ArticleFavoriteCount> articlesFavoriteCount(@Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleReadService", "method_name": "queryArticles", "method_chunk": "List<String> queryArticles(\n      @Param(\"tag\") String tag,\n      @Param(\"author\") String author,\n      @Param(\"favoritedBy\") String favoritedBy,\n      @Param(\"page\") Page page);"}, {"parent_name": "ArticleReadService", "method_name": "countArticle", "method_chunk": "int countArticle(\n      @Param(\"tag\") String tag,\n      @Param(\"author\") String author,\n      @Param(\"favoritedBy\") String favoritedBy);"}]}]}, {"class_name": "CommentsApi", "class_chunk": "", "methods": [{"method_name": "createComment", "method_chunk": "@PostMapping\n  public ResponseEntity<?> createComment(\n      @PathVariable(\"slug\") String slug,\n      @AuthenticationPrincipal User user,\n      @Valid @RequestBody NewCommentParam newCommentParam) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    Comment comment = new Comment(newCommentParam.getBody(), user.getId(), article.getId());\n    commentRepository.save(comment);\n    return ResponseEntity.status(201)\n        .body(commentResponse(commentQueryService.findById(comment.getId(), user).get()));\n  }", "calls": [{"parent_name": "CommentRepository", "method_name": "save", "method_chunk": "void save(Comment comment);"}, {"parent_name": "CommentsApi", "method_name": "createComment", "method_chunk": "@PostMapping\n  public ResponseEntity<?> createComment(\n      @PathVariable(\"slug\") String slug,\n      @AuthenticationPrincipal User user,\n      @Valid @RequestBody NewCommentParam newCommentParam) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    Comment comment = new Comment(newCommentParam.getBody(), user.getId(), article.getId());\n    commentRepository.save(comment);\n    return ResponseEntity.status(201)\n        .body(commentResponse(commentQueryService.findById(comment.getId(), user).get()));\n  }"}, {"parent_name": "CommentsApi", "method_name": "commentResponse", "method_chunk": "private Map<String, Object> commentResponse(CommentData commentData) {\n    return new HashMap<String, Object>() {\n      {\n        put(\"comment\", commentData);\n      }\n    };\n  }"}, {"parent_name": "CommentReadService", "method_name": "findById", "method_chunk": "CommentData findById(@Param(\"id\") String id);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "CommentQueryService", "method_name": "findById", "method_chunk": "public Optional<CommentData> findById(String id, User user) {\n    CommentData commentData = commentReadService.findById(id);\n    if (commentData == null) {\n      return Optional.empty();\n    } else {\n      commentData\n          .getProfileData()\n          .setFollowing(\n              userRelationshipQueryService.isUserFollowing(\n                  user.getId(), commentData.getProfileData().getId()));\n    }\n    return Optional.ofNullable(commentData);\n  }"}, {"parent_name": "ArticleRepository", "method_name": "findBySlug", "method_chunk": "Optional<Article> findBySlug(String slug);"}]}, {"method_name": "getComments", "method_chunk": "@GetMapping\n  public ResponseEntity getComments(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    List<CommentData> comments = commentQueryService.findByArticleId(article.getId(), user);\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"comments\", comments);\n          }\n        });\n  }", "calls": [{"parent_name": "CommentsApi", "method_name": "getComments", "method_chunk": "@GetMapping\n  public ResponseEntity getComments(\n      @PathVariable(\"slug\") String slug, @AuthenticationPrincipal User user) {\n    Article article =\n        articleRepository.findBySlug(slug).orElseThrow(ResourceNotFoundException::new);\n    List<CommentData> comments = commentQueryService.findByArticleId(article.getId(), user);\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"comments\", comments);\n          }\n        });\n  }"}, {"parent_name": "CommentReadService", "method_name": "findByArticleId", "method_chunk": "List<CommentData> findByArticleId(@Param(\"articleId\") String articleId);"}, {"parent_name": "UserRelationshipQueryService", "method_name": "followingAuthors", "method_chunk": "Set<String> followingAuthors(@Param(\"userId\") String userId, @Param(\"ids\") List<String> ids);"}, {"parent_name": "ArticleRepository", "method_name": "findBySlug", "method_chunk": "Optional<Article> findBySlug(String slug);"}, {"parent_name": "CommentQueryService", "method_name": "findByArticleId", "method_chunk": "public List<CommentData> findByArticleId(String articleId, User user) {\n    List<CommentData> comments = commentReadService.findByArticleId(articleId);\n    if (comments.size() > 0 && user != null) {\n      Set<String> followingAuthors =\n          userRelationshipQueryService.followingAuthors(\n              user.getId(),\n              comments.stream()\n                  .map(commentData -> commentData.getProfileData().getId())\n                  .collect(Collectors.toList()));\n      comments.forEach(\n          commentData -> {\n            if (followingAuthors.contains(commentData.getProfileData().getId())) {\n              commentData.getProfileData().setFollowing(true);\n            }\n          });\n    }\n    return comments;\n  }"}]}]}, {"class_name": "CurrentUserApi", "class_chunk": "", "methods": [{"method_name": "currentUser", "method_chunk": "@GetMapping\n  public ResponseEntity currentUser(\n      @AuthenticationPrincipal User currentUser,\n      @RequestHeader(value = \"Authorization\") String authorization) {\n    UserData userData = userQueryService.findById(currentUser.getId()).get();\n    return ResponseEntity.ok(\n        userResponse(new UserWithToken(userData, authorization.split(\" \")[1])));\n  }", "calls": [{"parent_name": "UserReadService", "method_name": "findById", "method_chunk": "UserData findById(@Param(\"id\") String id);"}, {"parent_name": "UserQueryService", "method_name": "findById", "method_chunk": "public Optional<UserData> findById(String id) {\n    return Optional.ofNullable(userReadService.findById(id));\n  }"}, {"parent_name": "CurrentUserApi", "method_name": "currentUser", "method_chunk": "@GetMapping\n  public ResponseEntity currentUser(\n      @AuthenticationPrincipal User currentUser,\n      @RequestHeader(value = \"Authorization\") String authorization) {\n    UserData userData = userQueryService.findById(currentUser.getId()).get();\n    return ResponseEntity.ok(\n        userResponse(new UserWithToken(userData, authorization.split(\" \")[1])));\n  }"}, {"parent_name": "CurrentUserApi", "method_name": "userResponse", "method_chunk": "private Map<String, Object> userResponse(UserWithToken userWithToken) {\n    return new HashMap<String, Object>() {\n      {\n        put(\"user\", userWithToken);\n      }\n    };\n  }"}]}, {"method_name": "updateProfile", "method_chunk": "@PutMapping\n  public ResponseEntity updateProfile(\n      @AuthenticationPrincipal User currentUser,\n      @RequestHeader(\"Authorization\") String token,\n      @Valid @RequestBody UpdateUserParam updateUserParam) {\n\n    userService.updateUser(new UpdateUserCommand(currentUser, updateUserParam));\n    UserData userData = userQueryService.findById(currentUser.getId()).get();\n    return ResponseEntity.ok(userResponse(new UserWithToken(userData, token.split(\" \")[1])));\n  }", "calls": [{"parent_name": "UserQueryService", "method_name": "findById", "method_chunk": "public Optional<UserData> findById(String id) {\n    return Optional.ofNullable(userReadService.findById(id));\n  }"}, {"parent_name": "UserReadService", "method_name": "findById", "method_chunk": "UserData findById(@Param(\"id\") String id);"}, {"parent_name": "UserService", "method_name": "updateUser", "method_chunk": "public void updateUser(@Valid UpdateUserCommand command) {\n    User user = command.getTargetUser();\n    UpdateUserParam updateUserParam = command.getParam();\n    user.update(\n        updateUserParam.getEmail(),\n        updateUserParam.getUsername(),\n        updateUserParam.getPassword(),\n        updateUserParam.getBio(),\n        updateUserParam.getImage());\n    userRepository.save(user);\n  }"}, {"parent_name": "CurrentUserApi", "method_name": "updateProfile", "method_chunk": "@PutMapping\n  public ResponseEntity updateProfile(\n      @AuthenticationPrincipal User currentUser,\n      @RequestHeader(\"Authorization\") String token,\n      @Valid @RequestBody UpdateUserParam updateUserParam) {\n\n    userService.updateUser(new UpdateUserCommand(currentUser, updateUserParam));\n    UserData userData = userQueryService.findById(currentUser.getId()).get();\n    return ResponseEntity.ok(userResponse(new UserWithToken(userData, token.split(\" \")[1])));\n  }"}, {"parent_name": "User", "method_name": "update", "method_chunk": "public void update(String email, String username, String password, String bio, String image) {\n    if (!Util.isEmpty(email)) {\n      this.email = email;\n    }\n\n    if (!Util.isEmpty(username)) {\n      this.username = username;\n    }\n\n    if (!Util.isEmpty(password)) {\n      this.password = password;\n    }\n\n    if (!Util.isEmpty(bio)) {\n      this.bio = bio;\n    }\n\n    if (!Util.isEmpty(image)) {\n      this.image = image;\n    }\n  }"}, {"parent_name": "CurrentUserApi", "method_name": "userResponse", "method_chunk": "private Map<String, Object> userResponse(UserWithToken userWithToken) {\n    return new HashMap<String, Object>() {\n      {\n        put(\"user\", userWithToken);\n      }\n    };\n  }"}, {"parent_name": "UserRepository", "method_name": "save", "method_chunk": "void save(User user);"}]}]}, {"class_name": "ProfileApi", "class_chunk": "", "methods": [{"method_name": "getProfile", "method_chunk": "@GetMapping\n  public ResponseEntity getProfile(\n      @PathVariable(\"username\") String username, @AuthenticationPrincipal User user) {\n    return profileQueryService\n        .findByUsername(username, user)\n        .map(this::profileResponse)\n        .orElseThrow(ResourceNotFoundException::new);\n  }", "calls": [{"parent_name": "ProfileQueryService", "method_name": "findByUsername", "method_chunk": "public Optional<ProfileData> findByUsername(String username, User currentUser) {\n    UserData userData = userReadService.findByUsername(username);\n    if (userData == null) {\n      return Optional.empty();\n    } else {\n      ProfileData profileData =\n          new ProfileData(\n              userData.getId(),\n              userData.getUsername(),\n              userData.getBio(),\n              userData.getImage(),\n              currentUser != null\n                  && userRelationshipQueryService.isUserFollowing(\n                      currentUser.getId(), userData.getId()));\n      return Optional.of(profileData);\n    }\n  }"}, {"parent_name": "UserRelationshipQueryService", "method_name": "isUserFollowing", "method_chunk": "boolean isUserFollowing(\n      @Param(\"userId\") String userId, @Param(\"anotherUserId\") String anotherUserId);"}, {"parent_name": "ProfileApi", "method_name": "getProfile", "method_chunk": "@GetMapping\n  public ResponseEntity getProfile(\n      @PathVariable(\"username\") String username, @AuthenticationPrincipal User user) {\n    return profileQueryService\n        .findByUsername(username, user)\n        .map(this::profileResponse)\n        .orElseThrow(ResourceNotFoundException::new);\n  }"}, {"parent_name": "UserReadService", "method_name": "findByUsername", "method_chunk": "UserData findByUsername(@Param(\"username\") String username);"}]}]}, {"class_name": "TagsApi", "class_chunk": "", "methods": [{"method_name": "getTags", "method_chunk": "@GetMapping\n  public ResponseEntity getTags() {\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"tags\", tagsQueryService.allTags());\n          }\n        });\n  }", "calls": [{"parent_name": "TagReadService", "method_name": "all", "method_chunk": "List<String> all();"}, {"parent_name": "TagsQueryService", "method_name": "allTags", "method_chunk": "public List<String> allTags() {\n    return tagReadService.all();\n  }"}, {"parent_name": "TagsApi", "method_name": "getTags", "method_chunk": "@GetMapping\n  public ResponseEntity getTags() {\n    return ResponseEntity.ok(\n        new HashMap<String, Object>() {\n          {\n            put(\"tags\", tagsQueryService.allTags());\n          }\n        });\n  }"}]}]}, {"class_name": "UsersApi", "class_chunk": "", "methods": []}]